<!DOCTYPE html>
<html lang="en"  xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Main Page</title>
</h:head>
<h:body>


    <h:form id="myForm">
        <h2>For Inserting User</h2>
        <p:outputLabel value="Username" />
        <p:inputText value="#{userController.userForInsert.userName}">
        </p:inputText>
        <br></br>
        <p:outputLabel value="Amount" />
        <p:inputText id="insert_amount"  value="#{userController.userForInsert.amount}" validatorMessage="Amount is not valid for inserting" maxlength="10">
            <f:convertNumber />
        </p:inputText>
        <br></br>
        <br><p:message for="insert_amount" style="color:red"></p:message></br>


        <p:outputLabel value="Access" />

        <p:selectOneMenu value = "#{userController.userForInsert.access}">
            <f:selectItem itemValue = "r" itemLabel = "read" />
            <f:selectItem itemValue = "w" itemLabel = "write" />
        </p:selectOneMenu>

        <p:outputLabel id="save" binding="#{userController.saveComponent}"></p:outputLabel>

        <p:commandButton value="Save"
                         update="myForm" actionListener="#{userController.insertUser()}">
        </p:commandButton>
        <p:message for="save" style="color: red"></p:message>

        <h2>For Finding User</h2>
        <p:outputLabel value="Username" />
        <p:inputText value="#{userController.userForFind.userName}">
        </p:inputText>
        <p:outputLabel id="find" binding="#{userController.findComponent}"></p:outputLabel>

        <p:commandButton value="Find"
                         update="myForm" actionListener="#{userController.readUser()}"></p:commandButton>
        <p:message for="find" style="color: red"></p:message>

        <h2>For changing user's amount</h2>
        <p:outputLabel value="Username" />
        <p:inputText value="#{userController.userForChange.userName}">
        </p:inputText>
        <p:outputLabel  value="New Amount" />
        <p:inputText id="change_amount" value="#{userController.userForChange.amount}" validatorMessage="Amount is not valid for changing" maxlength="10">
            <f:convertNumber />
        </p:inputText>
        <br><p:message for="change_amount" style="color:red" /></br>
        <p:outputLabel id="change" binding="#{userController.changeComponent}"></p:outputLabel>

        <p:commandButton value="Change"
                         update="myForm" actionListener="#{userController.changeUser()}"></p:commandButton>


        <p:message for="change" style="color: red"></p:message>

        <p:dataTable id="myTable" value = "#{userController.users}" var = "user">

            <p:column>
                <f:facet name = "header">Name</f:facet>
                #{user.userName}
            </p:column>

            <p:column>
                <f:facet name = "header">Amount</f:facet>
                #{user.amount}
            </p:column>

            <p:column>
                <f:facet name = "header">Access</f:facet>
                #{user.access}
            </p:column>

        </p:dataTable>
    </h:form>

</h:body>
</html>